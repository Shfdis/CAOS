Ермошкин Артём Дмитриевич
Группа: 245

УСЛОВИЕ ЗАДАЧИ
Разработать независимые программы клиента и сервера, взаимодействующие через разделяемую память POSIX. Клиент генерирует случайные числа, сервер выводит их. Обеспечить корректное завершение: при завершении одного процесса другой также завершается, разделяемая память удаляется.

РЕАЛИЗАЦИЯ
Используются POSIX shm/sem: shm_open(), mmap(), sem_init(), shm_unlink(). Структура: value, ready, active, heartbeat server_ts_ms/client_ts_ms, семафор.
Порядок запуска: сначала client (создает shm), затем server (подключается). Сервер обновляет heartbeat каждые 50 мс; клиент завершает работу, если active=0 или сервер не обновлял heartbeat > 2000 мс.

РЕЗУЛЬТАТЫ РАБОТЫ ПРОГРАММЫ
$ ./server
[Сервер] Получено число: 42
[Сервер] Получено число: 17
...

$ ./client
[Клиент] Сгенерировано число: 42
[Клиент] Сгенерировано число: 17
...

ТЕСТИРОВАНИЕ
Запуск client → server: успешно, данные передаются корректно. Завершение сервера: клиент видит таймаут heartbeat и завершается, разделяемая память удаляется. Синхронизация через семафор работает правильно.

ВАРИАНТ КОРРЕКТНОГО ЗАВЕРШЕНИЯ
Механизм: флаг active + heartbeat (server_ts_ms). Клиент читает heartbeat и выходит при таймауте или active=0. Очистка через atexit(): сервер удаляет shm, оба завершают семафор/munmap.

ВЫВОДЫ
Программы используют POSIX shm и семафор. Завершение корректно: при остановке сервера клиент обнаруживает таймаут heartbeat/active=0 и завершается, shm удаляется сервером.

